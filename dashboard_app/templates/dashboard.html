{% extends "layouts/baseDashboard.html" %}

{% load static %}
{% load custom_filters %}
{% block content %}
  <div class="row">
    <!--Card-->
    <div class="col-xl-3 col-md-6 mb-4">
      <div class="info-card card border-left-primary shadow h-100 py-2 rounded-5">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col">
              <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                Nuevos Usuarios</div>
              <div class="h5 mb-0 font-weight-bold"><i class="fas fa-caret-up fa-lg text-success me-2"></i>6.200</div>
            </div>
            <div class="col-auto">
              <i class="fas fa-users fa-2x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--Card-->
    <div class="col-xl-3 col-md-6 mb-4">
      <div class="info-card card border-left-success shadow h-100 py-2 rounded-5 ">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col">
              <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                Total Ventas (Mensual)</div>
                <div class="h5 mb-0 font-weight-bold"><i class="fas fa-caret-up fa-lg text-success me-2"></i>$650.000</div>
            </div>
            <div class="col-auto">
              <i class="fas fa-dollar-sign fa-2x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--Card-->
    <div class="col-xl-3 col-md-6 mb-4">
      <div class="info-card card border-left-info shadow h-100 py-2 rounded-5">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col">
              <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Visitas Diarias
              </div>
              <div class="row no-gutters align-items-center">
                <div class="col-auto">
                  <div class="h5 mb-0 mr-3 font-weight-bold"><i class="fas fa-caret-down fa-lg text-danger me-2"></i>6.430</div>
                </div>
              </div>
            </div>
            <div class="col-auto">
              <span class="fa-stack card-icon small p-0">
                <i class="fa-regular fa-circle fa-stack-2x"></i>
                <i class="fa-regular fa-eye fa-stack-1x"></i>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--Card-->
    <div class="col-xl-3 col-md-6 mb-4">
      <div class="info-card card border-left-indigo shadow h-100 py-2 rounded-5">
        <div class="card-body">
          <div class="row no-gutters align-items-center">
            <div class="col">
              <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Compras Diarias
              </div>
              <div class="row no-gutters align-items-center">
                <div class="col-auto">
                  <div class="h5 mb-0 mr-3 font-weight-bold"><i class="fas fa-caret-up fa-lg text-success me-2"></i>4.200</div>
                </div>
              </div>
            </div>
            <div class="col-auto">
              <i class="fas fa-bag-shopping fa-2x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  <!-- Content Row -->
  <div class="row">
    <!-- Content Column -->
    <div class="col-lg-12 mb-2">
      <!--Selled Orders Status Table-->
      <div class="info-card card shadow mb-2 h-auto">
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
          <h5 class="m-0 fw-semibold text-light">Seguimiento Compras</h5>
          <h5 class="m-0 fw-normal"><a href="{% url "dashboardShopping" %}" class="text-info">M치s detalles</a></h5>
        </div>
        <div class="card-body mx-2 overflow-auto" style="height: 300px;">
          <div class="table-responsive">
            <table class="table table-striped text-nowrap">
              <thead>
                <tr>
                  <th scope="col">ID</th>
                  <th scope="col">Cliente</th>
                  <th scope="col">Cant. Productos</th>
                  <th scope="col">Monto</th>
                  <th scope="col">Fecha</th>
                  <th scope="col">Estado</th>
                </tr>
              </thead>
              <tbody>
                <!--A침adir FOR con los datos correspondientes-->
                {% for purchase in purchases %}
                <tr>
                  <th scope="row">{{purchase.id}}</th>
                  <td>{{purchase.client.first_name}} {{purchase.client.surname}} {{purchase.client.last_name}}</td>
                  <td>{{purchase.total_quantity}}</td>
                  <td>{{purchase.paid|currency_format}}</td>
                  <td>{{purchase.creation_date}}</td>
                  <td>
                    <p class="state {{purchase.status_class}} rounded-pill bg-opacity-75 fw-semibold">
                      {{purchase.get_status_display}}
                    </p>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Content Row -->
  <div class="row">
    <!-- Area Chart -->
    <div class="col-xl-6 col-md-6 mb-2">
      <div class="info-card card shadow mb-2 h-auto">
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
          <h5 class="m-0 fw-semibold text-light">Gr치fica Ganancias</h5>
          <div class="col-auto">
            <i class="fas fa-chart-simple fa-lg"></i>
          </div>
        </div>
        <div class="card-body mx-2">
            <img class="" src="{% static "public/img/graph1.png" %}" alt="">
        </div>
      </div>
    </div>
    <div class="col-xl-6 col-md-6 mb-2">
      <div class="info-card card shadow mb-2 h-auto">
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
          <h5 class="m-0 fw-semibold text-light">Gr치fica Ventas</h5>
          <div class="col-auto">
            <i class="fas fa-chart-simple fa-lg"></i>
          </div>
        </div>
        <div class="card-body mx-2">
            <img class="" src="{% static "public/img/graph2.png" %}" alt="">
        </div>
      </div>
    </div>
{% endblock content %}